apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  # --- Repositórios Helm ---
  - flux/helmrepositories.yaml
  - flux/rancher-lpp-repo.yaml
  - ingress/metallb/helmrepo.yaml
  - ingress/traefik/helmrepo.yaml

  # --- Armazenamento ---
  - storage/local-path/helmrelease.yaml

  # --- MetalLB (deve vir antes dos IPAddressPool e Traefik) ---
  - ingress/metallb/helmrelease.yaml
  - ingress/metallb/pool.yaml

  # --- Traefik (usa IPs do MetalLB) ---
  - ingress/traefik/helmrelease.yaml
  - ingress/ingress-grafana.yaml
  - ingress/ingress-dashboard.yaml

  # --- Aplicações ---
  - apps/monitoring
  - apps/dashboard